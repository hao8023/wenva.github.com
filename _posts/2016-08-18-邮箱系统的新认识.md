---
layout: post
title: "邮箱系统的新认识"
date: 2016-08-18
comments: false
categories: 技巧
---

这段时间公司需要使用自己的域名来构建一个邮箱，于是想了解下邮箱系统，发现里面的水很深，本文将记录下这些新知识。

### 邮箱系统组成（宏观）

 ------------------------                ------------------------
|         client         |              |         client         |
 ------------------------                ------------------------
    ↑               |                       |               ↑
    |               |                       |               |
    |               ↓                       ↓               |
 --------        --------                --------        --------
|        |      |        | -----------> |        |      |        | 
|POP/IMAP|      |  SMTP  |              |  SMTP  |      |POP/IMAP|
|        |      |        | <----------- |        |      |        |
 --------        --------                --------        -------- 
    ↑               |                       |               ↑
    |               |                       |               |
    |               ↓                       ↓               |
 ------------------------                ------------------------
|         mailbox        |              |         mailbox        |
 ------------------------                ------------------------
 
 * client - 邮件客户端，包含本地客户端(foxmail、outlook、Mail等)和web客户端
 * POP/IMAP - 接收服务器，主要用于客户端读取存在store中的邮件
 * SMTP - 发送服务器，用于收发邮件及存储
 * mailbox - 存储邮件
 
PS： 通过上图，大家应该比较容易理解为何客户端需要配置发送服务器及接收服务器

### 邮箱系统组成（微观）
从微观上讲，一个邮箱系统包含MTA、MDA、mailbox、POP/IMAP、MUA、MSA六个部分组成

* MTA - Mail Transfer Agent，向其他MTA发送邮件，接收或拒收其他MTA发来的邮件，属于SMTP
* MDA - Mail Delivery Agent，把本地MTA从远程发件人MTA接收到的邮件投递到用户的邮箱(mailbox)，属于SMTP
* mailbox - 存储用户的邮件
* POP/IMAP - 福州把mailbox的邮件传递给MUA，供用户查看
* MUA - Mail User Agent，即对应上方的client
* MSA - 用于客户端发邮件

 ------------------------                ------------------------
|  MUA             MSA   |              |  MSA             MUA   |
 ------------------------                ------------------------
    ↑               |                       |               ↑
    |               |                       |               |
    |               ↓                       ↓               |
 --------        --------                --------        --------
|        |      |        | -----------> |        |      |        | 
|POP/IMAP|      |MTA MDA |              |MTA MDA |      |POP/IMAP|
|        |      |        | <----------- |        |      |        |
 --------        --------                --------        -------- 
    ↑               |                       |               ↑
    |               |                       |               |
    |               ↓                       ↓               |
 ------------------------                ------------------------
|         mailbox        |              |         mailbox        |
 ------------------------                ------------------------